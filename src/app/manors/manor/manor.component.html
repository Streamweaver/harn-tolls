<div class="row title-box bg-dark text-white page px-3 py-2 mx-1">
  <div class="col">
    <strong>Manor Budget</strong>
  </div>
  <div class="col text-right h4">{{manor?.name}}<span *ngIf="manor && manor.realm">, {{manor.realm}}</span></div>
</div>
<div class="container-fluid mb-2">

  <div class="row mx-2 form-inline" [formGroup]="manorForm">
    <div class="input-group input-group-sm col-md-4">
      <div class="input-group-prepend">
        <span class="input-group-text">Name:</span>
      </div>
      <input type="text" class="form-control" formControlName="name" [(ngModel)]="manor.name" placeholder="Name of Manor">
    </div>
    <div class="input-group input-group-sm col-md-4">
      <div class="input-group-prepend">
        <span class="input-group-text">Realm:</span>
      </div>
      <input type="text" class="form-control" formControlName="realm" [(ngModel)]="manor.realm" placeholder="Name of Kingdom">
    </div>
    <div class="col-md-4 text-right">
    <button class="btn btn-sm btn-primary" (click)="onGenerateClick()" *ngIf="showGenerationInput">
      <i class="fas fa-users"></i>
      Generate
    </button>
    <button class="btn btn-sm btn-danger" (click)="onResetClick()" *ngIf="!showGenerationInput">
      <i class="far fa-trash-alt"></i>
      Reset
    </button>
    <a class="btn btn-secondary btn-sm" data-toggle="collapse" href="#collapsePolicies" role="button"
       aria-expanded="false" aria-controls="collapsePolicies"
    *ngIf="showGenerationInput">
      <i class="fas fa-cog"></i>
      Policies
    </a>
    </div>
  </div>

  <hr class="small">

  <div class="collapse" id="collapsePolicies" *ngIf="showGenerationInput">
    <app-policies [policies]="manor.policies"></app-policies>
    <hr class="small">
  </div>

  <div class="row sm-gutters">
    <div class="col-md-4">
      <app-general-data [manor]="manor"></app-general-data>
    </div>
    <div class="col">
      <app-household-list [manor]="manor"></app-household-list>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <app-fief-budget [manor]="manor"></app-fief-budget>
    </div>
    <div class="col">
      <app-crop-list [manor]="manor"></app-crop-list>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <app-lords-budget [manor]="manor"></app-lords-budget>
    </div>
    <div class="col">
      <app-herd-list [manor]="manor"></app-herd-list>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <p class="lead">
        <strong>Notes:</strong> {{manor.notes.join('. ')}}
      </p>
    </div>
  </div>
</div>

<app-tenant-list [manor]="manor"></app-tenant-list>
 {{manor | json}}
